@startuml
!include <C4/C4>
!include <C4/C4_Context>
!include <C4/C4_Container>

LAYOUT_LEFT_RIGHT()

title C4 Component Diagram - Expense System

Person(user, "User", "Gebruiker die uitgaven wil beheren")

System_Boundary(ExpenseSystem, "Expense System") {

  Container(Controllers, "Controllers", "Spring Boot", "Behandelt binnenkomende HTTP-verzoeken\n- AuthorizationController\n- ExpenseController")
  Container(Services, "Services", "Spring Boot", "Bevat de businesslogica\n- IAuthorizationService / AuthorizationService\n- IExpenseService / ExpenseService")
  Container(Repositories, "Repositories", "Spring Boot", "Data access-laag\n- IUserRepository / UserRepository\n- IExpenseRepository / ExpenseRepository")
  Container(Security, "Authentication & Security", "Spring Boot", "Afhandelen van authenticatie en beveiliging\n- ForbiddenAuthenticationEntryPoint\n- SecurityConfig\n- SessionFilter")
  Container(Config, "Config", "Spring Boot", "Configuratie en databaseinstellingen\n- DBConfig")
  Container(Domain, "Domain Model", "Java Classes", "Domeinobjecten:\n- Cookie\n- Expense\n- Login\n- SessionCookie")
  Container(DTOs, "DTOs", "Java Classes", "Data Transfer Objects:\n- SessionDto\n- UserDto")
  Container(Exceptions, "Exceptions", "Spring Boot", "Foutafhandeling:\n- InvalidExpenseException\n- InvalidExpenseExceptionHandler")

}

Rel(user, Controllers, "Verstuurt verzoeken (HTTP)")
Rel(Controllers, Services, "Gebruikt")
Rel(Services, Repositories, "Haalt / slaat data op via")
Rel(Controllers, Security, "Gaat door security filters")
Rel(Security, Controllers, "Beveiligt endpoints")
Rel(Config, Repositories, "Biedt DB-configuratie aan")
Rel(Services, Domain, "Gebruikt domeinobjecten")
Rel(Controllers, DTOs, "Maakt gebruik van DTO's voor input/output")
Rel(Controllers, Exceptions, "Maakt gebruik van foutafhandeling")
Rel(Services, Exceptions, "Maakt gebruik van foutafhandeling")

@enduml
