@startuml "Class Diagram voor Activity Extension in Triptop"

title "Class Diagram: Uitbreiding met nieuwe activiteitstypes"

' Primary interface
interface IActivityProviderPort {
  +getAvailableActivities(location, dateRange): List<Activity>
  +bookActivity(activityId, participants): Booking
  +getSupportedActivityTypes(): List<ActivityType>
}

' Core service
class ActivityService {
  -providerRegistry: ProviderRegistry
  +searchActivities(location, dateRange, preferences): List<Activity>
  +bookActivity(activityId, participants): Booking
}

' Registry
class ProviderRegistry {
  -providers: Map<ActivityType, List<IActivityProviderPort>>
  +registerProvider(provider: IActivityProviderPort): void
  +getProvidersForType(type: ActivityType): List<IActivityProviderPort>
}

' Adapters
class TripAdvisorAdapter {
  -apiClient: TripAdvisorClient
  +getAvailableActivities(): List<Activity>
  +bookActivity(): Booking
  +getSupportedActivityTypes(): List<ActivityType>
}

class BookingAdapter {
  -apiClient: BookingClient
  +getAvailableActivities(): List<Activity>
  +bookActivity(): Booking
  +getSupportedActivityTypes(): List<ActivityType>
}

class GoogleMapsAdapter {
  -apiClient: GoogleMapsClient
  +getAvailableActivities(): List<Activity>
  +bookActivity(): Booking
  +getSupportedActivityTypes(): List<ActivityType>
}

' Domain models
enum ActivityType {
  EXCURSIE
  OVERNACHTING
  VERVOER
}

class Activity {
  -id: String
  -name: String
  -location: String
  -type: ActivityType
}

class Booking {
  -id: String
  -activityId: String
  -status: String
}

' Relationships
ActivityService --> ProviderRegistry
ActivityService --> IActivityProviderPort
ProviderRegistry --> IActivityProviderPort

IActivityProviderPort <|.. TripAdvisorAdapter
IActivityProviderPort <|.. BookingAdapter
IActivityProviderPort <|.. GoogleMapsAdapter

Activity --> ActivityType

' External systems
class "TripAdvisor API" as TripAdvisorAPI << External System >>
class "Booking.com API" as BookingAPI << External System >>
class "Google Maps API" as GoogleMapsAPI << External System >>

TripAdvisorAdapter --> TripAdvisorAPI
BookingAdapter --> BookingAPI
GoogleMapsAdapter --> GoogleMapsAPI

' Note about extension mechanism
note bottom of IActivityProviderPort
  Uitbreidingspunt: Nieuwe providers worden 
  toegevoegd door deze interface te implementeren
end note

@enduml 